{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./Inicio.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Inicio(){const[stats,setStats]=useState({usuarios:0,tecnicos:0,enProceso:0,cerrados:0,cancelados:0,promedioSatisfaccion:0});const[statsTecnicos,setStatsTecnicos]=useState([]);const[statsUsuarios,setStatsUsuarios]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const[usuarios,tecnicos,enProceso,cerrados,cancelados,evaluaciones,tecnicosStats,usuariosStats]=await Promise.all([axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/usuarios\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/tecnicos\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/ticketsEnProceso\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/ticketsCerrado\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/ticketsCancelado\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/ticketsConEvaluacion\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/statsTecnicos\")),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/web/statsUsuarios\"))]);const promedio=calcularPromedio(evaluaciones.data);setStats({usuarios:usuarios.data.filter(u=>u.id_rol===3).length,tecnicos:usuarios.data.filter(u=>u.id_rol===2).length,enProceso:enProceso.data.length,cerrados:cerrados.data.length,cancelados:cancelados.data.length,promedioSatisfaccion:promedio});setStatsTecnicos(tecnicosStats.data);setStatsUsuarios(usuariosStats.data);}catch(error){console.error(\"Error cargando dashboard:\",error);}};fetchData();},[]);const calcularPromedio=lista=>{const evaluados=lista.filter(t=>t.calificacion_promedio!=null);if(evaluados.length===0)return 0;const total=evaluados.reduce((sum,t)=>sum+Number(t.calificacion_promedio),0);return(total/evaluados.length).toFixed(2);};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"titulo-pagina\",children:\"Estad\\xEDsticas Generales\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Usuarios\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.usuarios})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"T\\xE9cnicos\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.tecnicos})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u2B50 Satisfacci\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.promedioSatisfaccion})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"En Proceso\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.enProceso})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Cerrados\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.cerrados})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Cancelados\"}),/*#__PURE__*/_jsx(\"p\",{children:stats.cancelados})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{className:\"subtitulo\",children:\"Estad\\xEDsticas por T\\xE9cnico\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cards-container\",children:statsTecnicos.map(t=>/*#__PURE__*/_jsxs(\"div\",{className:\"card-theme user-card\",children:[/*#__PURE__*/_jsx(\"h5\",{children:t.nombre}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tickets resueltos: \",/*#__PURE__*/_jsx(\"strong\",{children:t.tickets_resueltos})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2B50 Promedio: \",/*#__PURE__*/_jsx(\"strong\",{children:t.calificacion_promedio?Number(t.calificacion_promedio).toFixed(2):\"N/A\"})]})]},t.id_usuario))}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{className:\"subtitulo\",children:\"Estad\\xEDsticas por Usuario\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cards-container\",children:statsUsuarios.map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"card-theme user-card\",children:[/*#__PURE__*/_jsx(\"h5\",{children:u.nombre}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tickets creados: \",/*#__PURE__*/_jsx(\"strong\",{children:u.tickets_creados})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2B50 Calificaci\\xF3n recibida: \",/*#__PURE__*/_jsx(\"strong\",{children:u.calificacion_promedio?Number(u.calificacion_promedio).toFixed(2):\"N/A\"})]})]},u.id_usuario))})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Inicio","stats","setStats","usuarios","tecnicos","enProceso","cerrados","cancelados","promedioSatisfaccion","statsTecnicos","setStatsTecnicos","statsUsuarios","setStatsUsuarios","fetchData","evaluaciones","tecnicosStats","usuariosStats","Promise","all","get","concat","process","env","REACT_APP_API_URL","promedio","calcularPromedio","data","filter","u","id_rol","length","error","console","lista","evaluados","t","calificacion_promedio","total","reduce","sum","Number","toFixed","className","children","map","nombre","tickets_resueltos","id_usuario","tickets_creados"],"sources":["C:/Users/nayep/Desktop/Proyecto_10mo-react/React/help-desk/src/components/modulos/inicio/Inicio.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Inicio.css\"; \nexport default function Inicio() {\n\n  const [stats, setStats] = useState({\n    usuarios: 0,\n    tecnicos: 0,\n    enProceso: 0,\n    cerrados: 0,\n    cancelados: 0,\n    promedioSatisfaccion: 0,\n  });\n\n  const [statsTecnicos, setStatsTecnicos] = useState([]);\n  const [statsUsuarios, setStatsUsuarios] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n\n        const [\n  usuarios,\n  tecnicos,\n  enProceso,\n  cerrados,\n  cancelados,\n  evaluaciones,\n  tecnicosStats,\n  usuariosStats\n] = await Promise.all([\n  axios.get(`${process.env.REACT_APP_API_URL}/web/usuarios`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/tecnicos`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/ticketsEnProceso`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/ticketsCerrado`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/ticketsCancelado`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/ticketsConEvaluacion`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/statsTecnicos`),\n  axios.get(`${process.env.REACT_APP_API_URL}/web/statsUsuarios`)\n]);\n\n\n        const promedio = calcularPromedio(evaluaciones.data);\n\n        setStats({\n          usuarios: usuarios.data.filter(u => u.id_rol === 3).length,\n          tecnicos: usuarios.data.filter(u => u.id_rol === 2).length,\n          enProceso: enProceso.data.length,\n          cerrados: cerrados.data.length,\n          cancelados: cancelados.data.length,\n          promedioSatisfaccion: promedio,\n        });\n\n        setStatsTecnicos(tecnicosStats.data);\n        setStatsUsuarios(usuariosStats.data);\n\n      } catch (error) {\n        console.error(\"Error cargando dashboard:\", error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const calcularPromedio = (lista) => {\n    const evaluados = lista.filter(t => t.calificacion_promedio != null);\n    if (evaluados.length === 0) return 0;\n\n    const total = evaluados.reduce(\n      (sum, t) => sum + Number(t.calificacion_promedio),\n      0\n    );\n\n    return (total / evaluados.length).toFixed(2);\n  };\n\n  return (\n    <div className=\"dashboard-container\">\n\n      <h1 className=\"titulo-pagina\">Estadísticas Generales</h1>\n\n      <div className=\"stats-grid\">\n        <div className=\"stat-card\">\n          <h4>Usuarios</h4>\n          <p>{stats.usuarios}</p>\n        </div>\n\n        <div className=\"stat-card\">\n          <h4>Técnicos</h4>\n          <p>{stats.tecnicos}</p>\n        </div>\n\n        <div className=\"stat-card\">\n          <h4>⭐ Satisfacción</h4>\n          <p>{stats.promedioSatisfaccion}</p>\n        </div>\n\n        <div className=\"stat-card\">\n          <h4>En Proceso</h4>\n          <p>{stats.enProceso}</p>\n        </div>\n\n        <div className=\"stat-card\">\n          <h4>Cerrados</h4>\n          <p>{stats.cerrados}</p>\n        </div>\n\n        <div className=\"stat-card\">\n          <h4>Cancelados</h4>\n          <p>{stats.cancelados}</p>\n        </div>        \n      </div>\n\n      <hr />\n\n      {/* ESTADÍSTICAS POR TÉCNICO */}\n      <h2 className=\"subtitulo\">Estadísticas por Técnico</h2>\n      <div className=\"cards-container\">\n        {statsTecnicos.map((t) => (\n          <div className=\"card-theme user-card\" key={t.id_usuario}>\n            <h5>{t.nombre}</h5>\n            <p>Tickets resueltos: <strong>{t.tickets_resueltos}</strong></p>\n            <p>⭐ Promedio: <strong>{t.calificacion_promedio ? Number(t.calificacion_promedio).toFixed(2) : \"N/A\"}</strong></p>\n          </div>\n        ))}\n      </div>\n\n      <hr />\n\n      {/* ESTADÍSTICAS POR USUARIO */}\n      <h2 className=\"subtitulo\">Estadísticas por Usuario</h2>\n      <div className=\"cards-container\">\n        {statsUsuarios.map((u) => (\n          <div className=\"card-theme user-card\" key={u.id_usuario}>\n            <h5>{u.nombre}</h5>\n            <p>Tickets creados: <strong>{u.tickets_creados}</strong></p>\n            <p>⭐ Calificación recibida: <strong>{u.calificacion_promedio ? Number(u.calificacion_promedio).toFixed(2) : \"N/A\"}</strong></p>\n          </div>\n        ))}\n      </div>\n\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}