{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./Login.css\";import logo from\"../../assets/logo.png\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setAutenticado}=_ref;const[usuario,setUsuario]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const navigate=useNavigate();useEffect(()=>{localStorage.removeItem(\"autenticado\");localStorage.removeItem(\"usuario\");setAutenticado(false);},[]);const manejarSubmit=async e=>{e.preventDefault();setError(\"\");try{const respuesta=await fetch(\"http://localhost:3001/web/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({usuario,password})});const datos=await respuesta.json();if(datos.success){localStorage.setItem(\"token\",datos.token);localStorage.setItem(\"usuario\",JSON.stringify({id_usuario:datos.user.id_usuario,nombre:datos.user.nombre,apellido:datos.user.apellido,id_rol:datos.user.id_rol}));localStorage.setItem(\"autenticado\",\"true\");setAutenticado(true);navigate(\"/inicio\");}else{setError(datos.message);}}catch(err){setError(\"Error al conectar con el servidor: \"+err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-header\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"ProTech\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:manejarSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Usuario\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ingresa tu usuario\",value:usuario,onChange:e=>setUsuario(e.target.value),required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Ingresa tu contrase\\xF1a\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Entrar\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login-footer\"})]});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","logo","jsx","_jsx","jsxs","_jsxs","Login","_ref","setAutenticado","usuario","setUsuario","password","setPassword","error","setError","navigate","localStorage","removeItem","manejarSubmit","e","preventDefault","respuesta","fetch","method","headers","body","JSON","stringify","datos","json","success","setItem","token","id_usuario","user","nombre","apellido","id_rol","message","err","className","children","src","alt","onSubmit","type","placeholder","value","onChange","target","required"],"sources":["C:/Users/nayep/Desktop/Proyecto_10mo-react/React/help-desk/src/components/fijos/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Login.css\"; \nimport logo from \"../../assets/logo.png\";\n\nfunction Login({ setAutenticado }) {\n  const [usuario, setUsuario] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  useEffect(() => {    \n    localStorage.removeItem(\"autenticado\");\n    localStorage.removeItem(\"usuario\");\n    setAutenticado(false);\n  }, []);\n\n  const manejarSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      const respuesta = await fetch(\"http://localhost:3001/web/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ usuario, password }),\n      });\n\n      const datos = await respuesta.json();\n\n      if (datos.success) {\n        localStorage.setItem(\"token\", datos.token);\n        localStorage.setItem(\n          \"usuario\",\n          JSON.stringify({\n            id_usuario: datos.user.id_usuario,\n            nombre: datos.user.nombre,\n            apellido: datos.user.apellido,\n            id_rol: datos.user.id_rol,\n          })\n        );\n        localStorage.setItem(\"autenticado\", \"true\");\n        setAutenticado(true);\n        navigate(\"/inicio\");\n      } else {\n        setError(datos.message);\n      }\n    } catch (err) {\n      setError(\"Error al conectar con el servidor: \" + err.message);\n    }\n  };\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-header\"></div>\n\n      <div className=\"login-content\">\n      \n        <img src={logo} alt=\"ProTech\" className=\"logo\" />\n\n\n        <div className=\"login-box\">\n          <form onSubmit={manejarSubmit}>\n            <label>Usuario</label>\n            <input\n              type=\"text\"\n              placeholder=\"Ingresa tu usuario\"\n              value={usuario}\n              onChange={(e) => setUsuario(e.target.value)}\n              required\n            />\n\n            <label>Contraseña</label>\n            <input\n              type=\"password\"\n              placeholder=\"Ingresa tu contraseña\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n\n            <button type=\"submit\">Entrar</button>\n          </form>\n\n          {error && <p className=\"error\">{error}</p>}\n        </div>\n      </div>\n\n      <div className=\"login-footer\"></div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}