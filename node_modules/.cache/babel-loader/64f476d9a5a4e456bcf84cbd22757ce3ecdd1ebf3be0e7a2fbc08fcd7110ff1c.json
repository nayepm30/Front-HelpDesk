{"ast":null,"code":"import React from\"react\";import{useEffect,useState}from\"react\";import{useLocation,useNavigate,NavLink,Outlet}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./Layout.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Layout(_ref){let{setAutenticado}=_ref;const navigate=useNavigate();const location=useLocation();const usuario=JSON.parse(localStorage.getItem(\"usuario\"));const roles={1:\"Administrador\",2:\"Técnico\",3:\"Usuario\"};const[notiCount,setNotiCount]=useState(0);const handleLogout=()=>{localStorage.clear();setAutenticado(false);navigate(\"/login\");};useEffect(()=>{const obtenerNotificaciones=async()=>{try{const res=await fetch(\"http://localhost:3001/web/ticketsSinAsignar\");const data=await res.json();setNotiCount(data.length);}catch(err){console.error(\"Error obteniendo tickets no asignados:\",err);}};obtenerNotificaciones();},[location.pathname]);return/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"logo-text\",children:\"HelpDesk\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"noti-icon position-relative\",style:{cursor:\"pointer\"},onClick:()=>navigate(\"/tickets-sin-asignar\"),children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-bell fs-4\"}),notiCount>0&&/*#__PURE__*/_jsx(\"span\",{className:\"noti-badge\",children:notiCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info text-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold\",children:[usuario===null||usuario===void 0?void 0:usuario.nombre,\" \",usuario===null||usuario===void 0?void 0:usuario.apellido]}),/*#__PURE__*/_jsx(\"div\",{className:\"user-role\",children:roles[usuario===null||usuario===void 0?void 0:usuario.id_rol]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"btn btn-danger logout-btn d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-box-arrow-right\"}),\" Salir\"]})]})]}),/*#__PURE__*/_jsx(\"aside\",{className:\"sidebar\",children:/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:\"sidebar-title\",children:\"General\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/inicio\",className:_ref2=>{let{isActive}=_ref2;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-house-door me-2\"}),\" Inicio\"]})}),(usuario===null||usuario===void 0?void 0:usuario.id_rol)===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"sidebar-title\",children:\"Administraci\\xF3n\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/usuarios\",className:_ref3=>{let{isActive}=_ref3;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-people me-2\"}),\" Usuarios\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/usuarios-inactivos\",className:_ref4=>{let{isActive}=_ref4;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-x me-2\"}),\" Usuarios Inactivos\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/roles\",className:_ref5=>{let{isActive}=_ref5;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-shield-lock me-2\"}),\" Roles\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/areas\",className:_ref6=>{let{isActive}=_ref6;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-building me-2\"}),\" \\xC1reas\"]})})]}),/*#__PURE__*/_jsx(\"li\",{className:\"sidebar-title\",children:\"Tickets\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/tickets\",className:_ref7=>{let{isActive}=_ref7;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-ticket-detailed me-2\"}),\" Tickets\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/tickets-sin-asignar\",className:_ref8=>{let{isActive}=_ref8;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-hourglass-split me-2\"}),\" Sin asignar\"]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/tickets-cerrados\",className:_ref9=>{let{isActive}=_ref9;return isActive?\"activo\":\"\";},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-check2-circle me-2\"}),\" Cerrados\"]})})]})})}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Outlet,{})})]});}export default Layout;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","NavLink","Outlet","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Layout","_ref","setAutenticado","navigate","location","usuario","JSON","parse","localStorage","getItem","roles","notiCount","setNotiCount","handleLogout","clear","obtenerNotificaciones","res","fetch","data","json","length","err","console","error","pathname","className","children","style","cursor","onClick","nombre","apellido","id_rol","to","_ref2","isActive","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9"],"sources":["C:/Users/nayep/Desktop/Proyecto_10mo-react/React/help-desk/src/components/fijos/Layout.jsx"],"sourcesContent":["import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, NavLink, Outlet } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./Layout.css\";\n\nfunction Layout({ setAutenticado }) {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const usuario = JSON.parse(localStorage.getItem(\"usuario\"));\n\n  const roles = {\n    1: \"Administrador\",\n    2: \"Técnico\",\n    3: \"Usuario\",\n  };\n\n  const [notiCount, setNotiCount] = useState(0);\n\n  const handleLogout = () => {\n    localStorage.clear();\n    setAutenticado(false);\n    navigate(\"/login\");\n  };\n\n  useEffect(() => {\n    const obtenerNotificaciones = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3001/web/ticketsSinAsignar\");\n        const data = await res.json();\n        setNotiCount(data.length);\n      } catch (err) {\n        console.error(\"Error obteniendo tickets no asignados:\", err);\n      }\n    };\n\n    obtenerNotificaciones();\n  }, [location.pathname]);\n\n  return (\n    <div className=\"layout\">      \n      <header className=\"header d-flex justify-content-between align-items-center\">\n        <h1 className=\"logo-text\">HelpDesk</h1>\n\n        <div className=\"d-flex align-items-center gap-4\">\n                    \n          <div\n            className=\"noti-icon position-relative\"\n            style={{ cursor: \"pointer\" }}\n            onClick={() => navigate(\"/tickets-sin-asignar\")}\n          >\n            <i className=\"bi bi-bell fs-4\"></i>\n\n            {notiCount > 0 && (\n              <span className=\"noti-badge\">\n                {notiCount}\n              </span>\n            )}\n          </div>\n          \n          <div className=\"user-info text-end\">\n            <div className=\"fw-bold\">{usuario?.nombre} {usuario?.apellido}</div>\n            <div className=\"user-role\">{roles[usuario?.id_rol]}</div>\n          </div>\n          \n          <button\n            onClick={handleLogout}\n            className=\"btn btn-danger logout-btn d-flex align-items-center gap-2\"\n          >\n            <i className=\"bi bi-box-arrow-right\"></i> Salir\n          </button>\n        </div>\n      </header>\n      \n      <aside className=\"sidebar\">\n        <nav>\n          <ul>\n\n            <li className=\"sidebar-title\">General</li>\n            <li>\n              <NavLink to=\"/inicio\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                <i className=\"bi bi-house-door me-2\"></i> Inicio\n              </NavLink>\n            </li>\n\n            {usuario?.id_rol === 1 && (\n              <>\n                <li className=\"sidebar-title\">Administración</li>\n                <li>\n                  <NavLink to=\"/usuarios\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                    <i className=\"bi bi-people me-2\"></i> Usuarios\n                  </NavLink>\n                </li>\n                <li>\n                  <NavLink to=\"/usuarios-inactivos\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                    <i className=\"bi bi-person-x me-2\"></i> Usuarios Inactivos\n                  </NavLink>\n                </li>\n                <li>\n                  <NavLink to=\"/roles\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                    <i className=\"bi bi-shield-lock me-2\"></i> Roles\n                  </NavLink>\n                </li>\n                <li>\n                  <NavLink to=\"/areas\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                    <i className=\"bi bi-building me-2\"></i> Áreas\n                  </NavLink>\n                </li>\n              </>\n            )}\n            \n            <li className=\"sidebar-title\">Tickets</li>\n            <li>\n              <NavLink to=\"/tickets\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                <i className=\"bi bi-ticket-detailed me-2\"></i> Tickets\n              </NavLink>\n            </li>\n            <li>\n                <NavLink to=\"/tickets-sin-asignar\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                  <i className=\"bi bi-hourglass-split me-2\"></i> Sin asignar\n                </NavLink>\n              </li>\n            <li>\n              <NavLink to=\"/tickets-cerrados\" className={({ isActive }) => isActive ? \"activo\" : \"\"}>\n                <i className=\"bi bi-check2-circle me-2\"></i> Cerrados\n              </NavLink>\n            </li>           \n          </ul>\n        </nav>\n      </aside>\n      \n      <main className=\"main-content\">\n        <Outlet />\n      </main>\n    </div>\n  );\n}\n\nexport default Layout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}